# 에이전트 온보딩 시뮬레이션

> **대상**: PM, 기획자, 비개발자
> **목적**: Wave Orchestration에서 AI 에이전트가 어떻게 투입되고 작업하는지 실제 시나리오로 이해
> **소요 시간**: 읽는 데 10분

---

## 이 문서를 읽으면 알게 되는 것

1. Orchestrator가 Sub-agent를 어떻게 생성하는지
2. 각 에이전트가 무엇을 읽고, 어떻게 작업을 시작하는지
3. 에이전트 간 협업이 어떻게 이루어지는지
4. 문제 발생 시 어떻게 보고되는지

---

## 시나리오: "Gallery Refactor" 프로젝트

**상황**: PM이 "이미지 갤러리 성능 개선" 기능을 요청했습니다.

```
복잡도 계산:
├─ 모듈 2개 × 0.3 = 0.6
├─ 일수 2일 × 0.2 = 0.4
├─ API 2개 × 0.25 = 0.5
├─ UI 2개 × 0.15 = 0.3
└─ 연동 0개 × 0.1 = 0
= 1.8 → 🟢 Simple (2-3명)
```

**결정**: Orchestrator가 **3명의 Sub-agent**를 투입하기로 결정

---

## Phase 0: 문서 준비 완료

Orchestrator가 6개 문서를 작성 완료한 상태입니다:

```
.claude/waves/gallery-refactor/
├── 01-PRD.md         ✅ (무엇을 만드는가)
├── 02-RFC.md         ✅ (어떻게 만드는가)
├── 03-ORCHESTRATION.md ✅ (누가 무엇을 하는가)
├── 04-CONTEXT.md     ✅ (배경 지식)
├── 05-POLICY-SETUP.md ✅ (동적 설정)
└── 06-AGENT-REFERENCES.md ✅ (참고 문서)
```

---

## Phase 1: 에이전트 투입 시뮬레이션

### 🎬 장면 1: Orchestrator가 Backend Agent 생성

```
┌─────────────────────────────────────────────────────────────────┐
│  🤖 ORCHESTRATOR                                    14:00:00    │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  Phase 1 시작합니다.                                            │
│                                                                 │
│  Backend Agent를 생성합니다...                                  │
│                                                                 │
│  📋 Agent에게 전달하는 프롬프트:                                │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │  당신은 Backend Agent입니다.                            │   │
│  │                                                         │   │
│  │  먼저 다음 문서를 순서대로 읽으세요:                      │   │
│  │  1. 04-CONTEXT.md (배경 지식)                           │   │
│  │  2. 03-ORCHESTRATION.md (당신의 Task 목록)              │   │
│  │  3. 06-AGENT-REFERENCES.md (참고 문서)                  │   │
│  │                                                         │   │
│  │  읽은 후, Task 1.1부터 시작하세요.                       │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 🎬 장면 2: Backend Agent가 문서를 읽고 학습

```
┌─────────────────────────────────────────────────────────────────┐
│  🔧 BACKEND AGENT                                   14:00:15    │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  04-CONTEXT.md를 읽고 있습니다...                               │
│                                                                 │
│  📖 이해한 내용:                                                │
│  • 프로젝트: {프로젝트명} 플랫폼                                │
│  • 현재 문제: 이미지 로딩이 느림 (평균 3초)                     │
│  • 목표: 1초 이내로 개선                                       │
│  • 기술 스택: Firebase Cloud Functions, Firestore              │
│                                                                 │
│  03-ORCHESTRATION.md를 읽고 있습니다...                         │
│                                                                 │
│  📋 나의 Task 목록:                                             │
│  • Task 1.1: getImageMetadata Cloud Function 구현              │
│  • Task 1.2: batchOptimizeImages Cloud Function 구현           │
│  • Task 1.3: cacheImageMetadata Cloud Function 구현            │
│                                                                 │
│  ✅ 학습 완료. Task 1.1 시작합니다.                             │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 🎬 장면 3: 동시에 Frontend Agent도 생성

```
┌─────────────────────────────────────────────────────────────────┐
│  🤖 ORCHESTRATOR                                    14:00:00    │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  (Backend Agent와 동시에)                                       │
│                                                                 │
│  Frontend Agent를 생성합니다...                                 │
│                                                                 │
│  📋 Agent에게 전달하는 프롬프트:                                │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │  당신은 Frontend Agent입니다.                           │   │
│  │                                                         │   │
│  │  먼저 다음 문서를 순서대로 읽으세요:                      │   │
│  │  1. 04-CONTEXT.md                                       │   │
│  │  2. 03-ORCHESTRATION.md                                 │   │
│  │  3. 06-AGENT-REFERENCES.md                              │   │
│  │                                                         │   │
│  │  ⚠️ Backend API는 아직 준비 중입니다.                   │   │
│  │  Mock 데이터를 사용해서 작업하세요.                      │   │
│  │                                                         │   │
│  │  읽은 후, Task 2.1부터 시작하세요.                       │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 🎬 장면 4: Frontend Agent가 Mock 기반으로 작업 시작

```
┌─────────────────────────────────────────────────────────────────┐
│  🎨 FRONTEND AGENT                                  14:00:20    │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  문서 학습 완료.                                                │
│                                                                 │
│  📋 나의 Task 목록:                                             │
│  • Task 2.1: useGallery 커스텀 훅 구현                         │
│  • Task 2.2: GalleryGrid 컴포넌트 구현                         │
│  • Task 2.3: ImageLightbox 컴포넌트 구현                       │
│                                                                 │
│  ⚠️ Backend API가 아직 준비되지 않았습니다.                    │
│  → 04-CONTEXT.md의 Mock 데이터 스키마를 사용합니다.            │
│                                                                 │
│  Mock 데이터:                                                   │
│  {                                                              │
│    "images": [                                                  │
│      { "id": "mock_1", "url": "...", "width": 800 }            │
│    ]                                                            │
│  }                                                              │
│                                                                 │
│  Task 2.1 시작합니다.                                           │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 🎬 장면 5: QA Agent도 동시에 작업

```
┌─────────────────────────────────────────────────────────────────┐
│  🧪 QA AGENT                                        14:00:25    │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  문서 학습 완료.                                                │
│                                                                 │
│  📋 나의 Task 목록:                                             │
│  • Task 3.1: Backend 테스트 케이스 작성                        │
│  • Task 3.2: Frontend 테스트 케이스 작성                       │
│  • Task 3.3: 통합 테스트 시나리오 준비                         │
│                                                                 │
│  💡 전략:                                                       │
│  Backend/Frontend가 작업하는 동안 테스트 케이스를 미리 작성    │
│  → 코드가 완성되면 바로 테스트 실행 가능                       │
│                                                                 │
│  Task 3.1 시작합니다.                                           │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## 실시간 진행 상황

### 🎬 장면 6: Orchestrator가 Progress Dashboard 업데이트

```
┌─────────────────────────────────────────────────────────────────┐
│  🚀 Gallery Refactor - 진행 현황                                │
│  시작: 14:00  |  현재: 14:45  |  예상 완료: 16:30               │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  Phase 0 (Spec):      ██████████ 100% ✅                       │
│  Phase 1 (Exec):      ██████░░░░  60% 🔄                       │
│  Phase 2 (Integ):     ░░░░░░░░░░   0% ⏳                       │
│                                                                 │
│  📊 에이전트별 상태:                                            │
│                                                                 │
│  🔧 Backend Agent:                                              │
│     ├─ Task 1.1: ██████████ 100% ✅ getImageMetadata           │
│     ├─ Task 1.2: ████████░░  80% 🔄 batchOptimizeImages        │
│     └─ Task 1.3: ░░░░░░░░░░   0% ⏳ cacheImageMetadata         │
│                                                                 │
│  🎨 Frontend Agent:                                             │
│     ├─ Task 2.1: ██████████ 100% ✅ useGallery hook            │
│     ├─ Task 2.2: ██████░░░░  60% 🔄 GalleryGrid                │
│     └─ Task 2.3: ░░░░░░░░░░   0% ⏳ ImageLightbox              │
│                                                                 │
│  🧪 QA Agent:                                                   │
│     ├─ Task 3.1: ██████████ 100% ✅ Backend 테스트             │
│     ├─ Task 3.2: ████░░░░░░  40% 🔄 Frontend 테스트            │
│     └─ Task 3.3: ░░░░░░░░░░   0% ⏳ 통합 테스트                │
│                                                                 │
│  [최근 활동]                                                    │
│  • 14:45 Backend: batchOptimizeImages 80% 완료                 │
│  • 14:40 Frontend: useGallery hook 커밋                        │
│  • 14:35 QA: Backend 테스트 33개 작성 완료                     │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## 에러 발생 시뮬레이션

### 🎬 장면 7: Frontend Agent에서 에러 발생

```
┌─────────────────────────────────────────────────────────────────┐
│  🎨 FRONTEND AGENT                                  14:50:00    │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ❌ 에러 발생!                                                  │
│                                                                 │
│  Task 2.2 (GalleryGrid) 작업 중 문제 발견:                     │
│                                                                 │
│  TypeError: Cannot read property 'thumbnailUrl' of undefined   │
│  at GalleryGrid.jsx:45                                         │
│                                                                 │
│  🔍 원인 분석:                                                  │
│  • Mock 데이터에는 'url' 필드만 있음                           │
│  • 하지만 실제 API 응답에는 'thumbnailUrl'도 있어야 함         │
│  • 04-CONTEXT.md의 Mock 스키마가 불완전한 것으로 보임          │
│                                                                 │
│  📤 Orchestrator에게 보고합니다...                              │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 🎬 장면 8: Orchestrator가 에러 처리

```
┌─────────────────────────────────────────────────────────────────┐
│  🤖 ORCHESTRATOR                                    14:50:05    │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  🚨 에러 보고 수신                                              │
│                                                                 │
│  심각도 평가 중...                                              │
│  ├─ 다른 에이전트 차단 여부: ❌ (Frontend만 영향)              │
│  ├─ 작업 계속 가능 여부: ✅ (우회 가능)                        │
│  └─ 심각도: 🟡 MEDIUM                                          │
│                                                                 │
│  📊 조치:                                                       │
│  1. Backend Agent에게 확인 요청                                │
│  2. Frontend Agent에게 임시 우회 방안 제시                     │
│                                                                 │
│  → Backend Agent에게 메시지 전송:                               │
│    "thumbnailUrl 필드가 API 응답에 포함되나요?"                 │
│                                                                 │
│  → Frontend Agent에게 메시지 전송:                              │
│    "thumbnailUrl이 없으면 url을 fallback으로 사용하세요"        │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 🎬 장면 9: 에러 해결

```
┌─────────────────────────────────────────────────────────────────┐
│  🔧 BACKEND AGENT                                   14:50:30    │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  Orchestrator 질문에 답변:                                      │
│                                                                 │
│  "네, thumbnailUrl은 API 응답에 포함됩니다.                     │
│   Task 1.1에서 구현했습니다.                                    │
│                                                                 │
│   실제 응답 형식:                                               │
│   {                                                             │
│     "id": "img_123",                                            │
│     "url": "https://..../full.jpg",                             │
│     "thumbnailUrl": "https://..../thumb.jpg",  ← 여기 있음     │
│     "width": 800,                                               │
│     "height": 600                                               │
│   }                                                             │
│                                                                 │
│   04-CONTEXT.md의 Mock 스키마를 업데이트해야 할 것 같습니다."   │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│  🤖 ORCHESTRATOR                                    14:51:00    │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ✅ 에러 해결됨                                                 │
│                                                                 │
│  조치 완료:                                                     │
│  1. 04-CONTEXT.md의 Mock 스키마 업데이트                       │
│  2. Frontend Agent에게 수정된 스키마 전달                      │
│                                                                 │
│  에러 로그:                                                     │
│  {                                                              │
│    "error_id": "err_001",                                       │
│    "severity": "MEDIUM",                                        │
│    "resolution_time": "5분",                                    │
│    "root_cause": "Mock 스키마 불완전",                          │
│    "lesson": "Backend 완료 후 Mock 스키마 검증 필요"           │
│  }                                                              │
│                                                                 │
│  Phase 1 계속 진행합니다.                                       │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## Phase 1 완료

### 🎬 장면 10: Orchestrator가 Phase 1 완료 보고

```
┌─────────────────────────────────────────────────────────────────┐
│  🤖 ORCHESTRATOR → PM                               15:30:00    │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ✅ Phase 1 완료                                                │
│                                                                 │
│  📊 Executive Summary:                                          │
│  ├─ 투입: 3명                                                   │
│  ├─ 소요: 1.5시간                                              │
│  ├─ 완료: Task 9/9 (100%)                                      │
│  └─ 에러: 1건 (해결됨)                                         │
│                                                                 │
│  📦 산출물:                                                     │
│  • Backend: 3개 Cloud Functions (412 lines)                    │
│  • Frontend: 2개 hooks + 2개 컴포넌트 (687 lines)              │
│  • Tests: 33 Backend + 38 Frontend = 71개                      │
│                                                                 │
│  🚀 다음: Phase 2 (통합 및 테스트)                              │
│                                                                 │
│  [PM 확인 필요 사항]                                            │
│  → 없음 (자동 진행 가능)                                        │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## Phase 2: 통합

### 🎬 장면 11: 새로운 Sub-agent 생성

```
┌─────────────────────────────────────────────────────────────────┐
│  🤖 ORCHESTRATOR                                    15:30:30    │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  Phase 2 시작합니다.                                            │
│                                                                 │
│  ⚠️ 중요: Phase 1의 Sub-agent들은 종료됩니다.                  │
│  → 새로운 Sub-agent를 생성합니다.                              │
│  → Phase 1 결과는 JSON으로 압축하여 전달합니다.                │
│                                                                 │
│  📋 Phase 2 Agent에게 전달하는 컨텍스트:                        │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │  {                                                       │   │
│  │    "phase": 1,                                           │   │
│  │    "status": "completed",                                │   │
│  │    "outputs": {                                          │   │
│  │      "backend": {                                        │   │
│  │        "functions": ["getImageMetadata", "batch..."],    │   │
│  │        "files": ["functions/gallery.js"]                 │   │
│  │      },                                                  │   │
│  │      "frontend": {                                       │   │
│  │        "hooks": ["useGallery", "useImageCache"],         │   │
│  │        "components": ["GalleryGrid", "ImageLightbox"]    │   │
│  │      }                                                   │   │
│  │    }                                                     │   │
│  │  }                                                       │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  Integration Agent를 생성합니다...                              │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 🎬 장면 12: Integration Agent가 통합 작업 수행

```
┌─────────────────────────────────────────────────────────────────┐
│  🔗 INTEGRATION AGENT                               15:31:00    │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  Phase 1 결과를 확인했습니다.                                   │
│                                                                 │
│  📋 통합 작업:                                                  │
│  1. Mock 데이터를 실제 API로 교체                              │
│  2. useGallery hook에서 실제 Cloud Function 호출               │
│  3. 통합 테스트 실행                                           │
│                                                                 │
│  작업 시작...                                                   │
│                                                                 │
│  ✅ Step 1: Mock → 실제 API 교체 완료                          │
│  ✅ Step 2: Cloud Function 연동 완료                           │
│  🔄 Step 3: 통합 테스트 실행 중...                             │
│                                                                 │
│  테스트 결과:                                                   │
│  ├─ Backend: 33/33 passed ✅                                   │
│  ├─ Frontend: 71/71 passed ✅                                  │
│  └─ Integration: 8/8 passed ✅                                 │
│                                                                 │
│  📦 PR 생성 중...                                               │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## 최종 완료

### 🎬 장면 13: Orchestrator가 PM에게 최종 보고

```
┌─────────────────────────────────────────────────────────────────┐
│  🤖 ORCHESTRATOR → PM                               16:00:00    │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  🎉 Gallery Refactor 프로젝트 완료!                             │
│                                                                 │
│  ═══════════════════════════════════════════════════════════   │
│                                                                 │
│  📊 최종 요약:                                                  │
│  ├─ 총 소요 시간: 2시간                                        │
│  ├─ 투입 에이전트: 4명 (Backend, Frontend, QA, Integration)    │
│  ├─ 에러 발생: 1건 (모두 해결)                                 │
│  └─ 테스트 통과: 112/112 (100%)                                │
│                                                                 │
│  📦 산출물:                                                     │
│  • 코드: 1,099 lines                                           │
│  • 테스트: 112개                                                │
│  • PR: #234 (Ready for Review)                                 │
│                                                                 │
│  🔗 링크:                                                       │
│  • PR: https://github.com/.../pull/234                         │
│  • Staging: https://{project}-staging.web.app              │
│                                                                 │
│  [PM 액션 필요]                                                 │
│  → PR 리뷰 후 머지 승인                                        │
│                                                                 │
│  ═══════════════════════════════════════════════════════════   │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## 핵심 포인트 요약

### PM이 기억해야 할 것

| 단계 | 무슨 일이 일어나는가 | PM이 해야 할 것 |
|------|---------------------|----------------|
| **Phase 0** | Orchestrator가 6개 문서 작성 | 검토 후 승인 |
| **Phase 1** | Sub-agent들이 병렬로 작업 | 진행 상황 모니터링 |
| **에러 발생 시** | Orchestrator가 자동 해결 시도 | CRITICAL만 개입 |
| **Phase 2** | 새 Agent가 통합 작업 | 최종 결과 확인 |
| **완료** | PR 생성됨 | 리뷰 후 머지 |

### 자주 묻는 질문

**Q: 에이전트가 실수하면 어떻게 되나요?**
> Orchestrator가 2회까지 자동 재시도합니다. 그래도 안 되면 PM에게 Decision Report가 옵니다.

**Q: 에이전트끼리 충돌하면?**
> 우선순위 규칙이 있습니다: Backend > Frontend > UI. Orchestrator가 자동 조율합니다.

**Q: 중간에 요구사항이 바뀌면?**
> Phase 완료 후에 조정 가능합니다. 진행 중인 Phase는 완료시키는 것이 좋습니다.

**Q: PM이 개입해야 하는 상황은?**
> 🔴 CRITICAL 에러가 발생했을 때만. 나머지는 자동 처리됩니다.

---

## 다음 단계

이 시뮬레이션을 읽었다면:

1. **Quick Reference Card** 출력해두기 → [WAVE-ORCHESTRATION-SPECIFICATION.md](./WAVE-ORCHESTRATION-SPECIFICATION.md#quick-reference-card)
2. **복잡도 공식** 외우기 → `(모듈×0.3) + (일수×0.2) + (API×0.25) + (UI×0.15) + (연동×0.1)`
3. **실제 프로젝트**에서 체험하기

---

## 📚 관련 문서

- [PROJECT-ROUTER.md](./PROJECT-ROUTER.md) - **프로젝트 유형 분기 가이드** (시작점)
- [AGENT-ONBOARDING-GREENFIELD.md](./AGENT-ONBOARDING-GREENFIELD.md) - 신규 프로젝트 온보딩 시뮬레이션
- [WAVE-ORCHESTRATION-SPECIFICATION.md](./WAVE-ORCHESTRATION-SPECIFICATION.md) - Wave 시스템 기술 명세
- [development/agent-roles.md](./development/agent-roles.md) - 에이전트 역할 정의

---

*이 문서는 비개발자가 Wave Orchestration을 이해하는 것을 돕기 위해 작성되었습니다.*
*실제 구현 세부사항은 기술 문서를 참조하세요.*
