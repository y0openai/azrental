# 세션 핸드오프
ts: 2026-01-13 03:00
from_session: "uncle-auth Wave 1 구현"

## 마지막 작업
task: "uncle-auth 기능 구현 (Wave 1)"
result: "완료 - 6단계 멀티스텝 회원가입 폼, 로그인, 상태 확인 페이지"

## 진행중 작업 (WIP)
wip:
  - "uncle-auth Wave 2: Integration & Testing"
  - "uncle-auth Wave 3: E2E Testing & Deploy"

## 미결 사항
pending:
  - "Firebase Admin 환경변수 설정 (FIREBASE_SERVICE_ACCOUNT_KEY)"
  - "실제 이메일 발송 로직 구현 (SendGrid/Nodemailer)"
  - "E2E 테스트 1개 스킵됨 (Zod 클라이언트 검증 테스트)"
  - "실제 에셋 교체 필요"
  - "Firebase Web App 연결 (콘솔에서 설정)"
  - "uncle-auth Firestore/Storage 보안 규칙 추가"

## 대화 맥락
context:
  - "uncle-auth Wave 1 완료 (f6a96a7)"
  - "34개 파일, 6,185줄 추가"
  - "TypeScript 타입 체크 통과, ESLint 통과"
  - "6단계 멀티스텝 폼: 기본정보→전문성→요금→일정→신원확인→동의"
  - "아조씨 테마 컬러: Red (#DC2626)"

---

## uncle-auth Wave 1 완료 요약

### 생성된 핵심 파일

**타입 & 검증:**
- `src/types/uncle.ts` - Uncle, UncleStatus, ExpertiseTag, WeeklyAvailability 등
- `src/lib/validations/uncle-auth.ts` - 6단계 Zod 스키마

**Server Actions:**
- `src/app/actions/uncle-auth.ts` - saveDraft, loadDraft, applyAsUncle, signInAsUncle
- `src/lib/firebase/storage.ts` - 이미지 업로드 유틸리티

**Frontend Core:**
- `src/services/uncleAuthService.ts` - 클라이언트 서비스
- `src/hooks/useUncleAuth.ts` - 인증 훅
- `src/hooks/useMultiStepForm.ts` - 멀티스텝 폼 훅
- `src/contexts/UncleAuthContext.tsx` - 컨텍스트

**UI 컴포넌트:**
- `src/components/ui/Textarea.tsx`
- `src/components/ui/FileUpload.tsx`
- `src/components/ui/ProgressBar.tsx`
- `src/components/uncle-auth/ProfileImageUpload.tsx`
- `src/components/uncle-auth/IdCardUpload.tsx`
- `src/components/uncle-auth/ExpertiseTags.tsx`
- `src/components/uncle-auth/WeeklySchedule.tsx`
- `src/components/uncle-auth/ApplicationStatus.tsx`
- `src/components/uncle-auth/UncleSignupForm.tsx`
- `src/components/uncle-auth/UncleLoginForm.tsx`

**6단계 스텝 컴포넌트:**
- `src/components/uncle-auth/steps/BasicInfoStep.tsx`
- `src/components/uncle-auth/steps/ExpertiseStep.tsx`
- `src/components/uncle-auth/steps/PricingStep.tsx`
- `src/components/uncle-auth/steps/AvailabilityStep.tsx`
- `src/components/uncle-auth/steps/VerificationStep.tsx`
- `src/components/uncle-auth/steps/AgreementStep.tsx`

**페이지:**
- `src/app/(uncle)/uncle/signup/page.tsx`
- `src/app/(uncle)/uncle/login/page.tsx`
- `src/app/(uncle)/uncle/status/page.tsx`
- `src/app/(uncle)/uncle/forgot-password/page.tsx`

**문서:**
- `docs/feature-hubs/uncle-auth/02-RFC.md`
- `docs/feature-hubs/uncle-auth/03-ORCHESTRATION.md`

---

## ⚠️ 새 세션 필수 지시

```yaml
step_1: "CLAUDE.md의 '필수 실행 프로토콜' 섹션 확인"
step_2: "작업 유형 선택 프롬프트 표시 [A]~[G]"
step_3: "선택에 따라 해당 onboarding 문서 읽기"
step_4: "[A] 선택 시 복잡도 계산 → Single/Wave 결정"
step_5: "온보딩 완료 보고 후 작업 시작"

warning: "이 프로토콜을 스킵하고 바로 코딩 시작 금지"
```

---

## 다음 세션 권장 작업
next_action: "uncle-auth Wave 2 (Integration & Testing) 진행"
alternative_actions:
  - "uncle-auth E2E 테스트 작성"
  - "Firestore/Storage 보안 규칙 업데이트"
  - "실제 회원가입 플로우 테스트"

read_first:
  - "CLAUDE.md"
  - ".handoff.md (이 파일)"

---

## Firebase 배포 정보

```yaml
hosting_url: https://azrental-842a8.web.app
project_id: azrental-842a8
region: asia-northeast3 (Seoul)
cloud_function: ssrazrental842a8

files:
  - firebase.json
  - .firebaserc
  - apphosting.yaml
  - firestore.rules
  - firestore.indexes.json
  - storage.rules
```

---

## customer-auth 완료 요약 (이전 세션)

### Wave 1~3 ✅
- Types, Backend, Frontend Core, UI 컴포넌트
- E2E 테스트: 10/11 통과
- Firebase Hosting 배포 완료
